<!doctype html>
<html class="no-js" lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDS-101: Introduction to Computational and Data Sciences</title>
    <link rel="stylesheet" href="http://spring18.cds101.com/theme/css/cds101.min.css">
    <link rel="stylesheet" href="http://spring18.cds101.com/theme/css/vendor/katex/katex.min.css">
    <link rel="stylesheet" href="http://spring18.cds101.com/theme/css/vendor/highlightjs/default.css">
    <link rel="stylesheet" href="http://spring18.cds101.com/theme/css/vendor/fontawesome/fa-svg-with-js.css">
    <link href="http://spring18.cds101.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="CDS-101: Introduction to Computational and Data Sciences Full Atom Feed" />
  </head>

  <body>
    <div class="header-grid-container">
      <div class="banner-container">
        <header>
          <div class="banner">
            <div class="course-logo">
              <a href="http://spring18.cds101.com/">
                <img src="http://spring18.cds101.com/theme/img/course-logo.svg">
              </a>
            </div>
            <div class="university-logo">
              <a href="https://gmu.edu">
                <img src="http://spring18.cds101.com/theme/img/university-logo.svg">
              </a>
            </div>
          </div>
        </header>
      </div>
    </div>
    <div class="navbar-container">
      <nav class="navbar">
        <div class="navbar-mobile" data-responsive-toggle="main-menu" data-hide-for="large">
          <button type="button" data-toggle="main-menu">
            <i class="fas fa-bars"></i><span class="navbar-mobile-title">Menu</span></button>
        </div>

        <div class="navbar-menu" id="main-menu">
          <ul class="navbar-menu-list">
            <li>
              <a class="navbar-home-item" href="http://spring18.cds101.com/">
                <i class="fas fa-home" data-fa-transform="grow-8"></i>
              </a>
            </li>
            <li>
              <a class="navbar-menu-item" href="http://spring18.cds101.com/syllabus.html">Syllabus</a>
            </li>
            <li>
              <a class="navbar-menu-item" href="http://spring18.cds101.com/materials.html">Materials</a>
            </li>
            <li>
              <a class="navbar-menu-item" href="http://spring18.cds101.com/assignments.html">Assignments</a>
            </li>
            <li>
              <a class="navbar-menu-item" href="http://spring18.cds101.com/datasets.html">Datasets</a>
            </li>
            <li class="navbar-social">
              <ul class="navbar-social-list">
                <li>
                  <a class="navbar-social-item" href="https://github.com/mason-sp18-cds-101-001/cds-101">
                    <i class="fab fa-github" data-fa-transform="grow-8"></i>
                  </a>
                </li>
                <li>
                  <a class="navbar-social-item" href="http://masoncds101.slack.com">
                    <i class="fab fa-slack" data-fa-transform="grow-8"></i>
                  </a>
                </li>
                <li>
                  <a class="navbar-social-item" href="feeds/all.atom.xml">
                    <i class="fas fa-rss-square" data-fa-transform="grow-8"></i>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    <div class="content-grid-container">
      <article class="static-page">
        <header class="static-page-header">
          <h1 class="static-page-title">Class size&nbsp;paradox</h1>
        </header>
        <div class="static-page-body">
          <div class="no-bullets">
            <ul>
              <li>
                <a href="/doc/class_size_paradox.pdf">
                  <i class="fas fa-file-pdf" data-fa-transform="grow-8"></i>  Download this&nbsp;reading</a>
              </li>
            </ul>
          </div>
          <pre class="r"><code>library(tidyverse)</code></pre>
          <p><strong>The following example assumes you have already read the standard reading on <a href="/materials/representing-distributions-pmf/"><em>Probability mass functions</em></a>.</strong></p>
          <p>Let’s consider another <span class="caps">PMF</span> computation that illustrates something that we may call the “class size&nbsp;paradox”.</p>
          <p>At many American colleges and universities, the student-to-faculty ratio is about 10:1. But students are often surprised to discover that their average class size is bigger than 10. There are two reasons for the&nbsp;discrepancy:</p>
          <ul>
            <li>Students typically take 4 – 5 classes per semester, but professors often teach 1 or&nbsp;2.</li>
            <li>The number of students who enjoy a small class is small, but the number of students in a large class is (unsurprisingly)&nbsp;large.</li>
          </ul>
          <p>The first effect is obvious, at least once it is pointed out; the second is more subtle. Let’s look at an example. Suppose that a college offers 65 classes in a given semester, with the following distribution of&nbsp;sizes:</p>
          <table>
            <thead>
              <tr class="header">
                <th>size</th>
                <th>count</th>
              </tr>
            </thead>
            <tbody>
              <tr class="odd">
                <td>5–9</td>
                <td>8</td>
              </tr>
              <tr class="even">
                <td>10–14</td>
                <td>8</td>
              </tr>
              <tr class="odd">
                <td>15–19</td>
                <td>14</td>
              </tr>
              <tr class="even">
                <td>20–24</td>
                <td>4</td>
              </tr>
              <tr class="odd">
                <td>25–29</td>
                <td>6</td>
              </tr>
              <tr class="even">
                <td>30–34</td>
                <td>12</td>
              </tr>
              <tr class="odd">
                <td>35–39</td>
                <td>8</td>
              </tr>
              <tr class="even">
                <td>40–44</td>
                <td>3</td>
              </tr>
              <tr class="odd">
                <td>45–49</td>
                <td>2</td>
              </tr>
            </tbody>
          </table>
          <p>If you ask the Dean for the average class size, he or she would construct a <span class="caps">PMF</span>, compute the mean, and report that the average class size is 23.7. Here’s the&nbsp;code:</p>
          <pre class="r"><code>class_sizes &lt;- tribble(
  ~`class size`, ~count,
  7, 8,
  12, 8,
  17, 14,
  22, 4,
  27, 6,
  32, 12,
  37, 8,
  42, 3,
  47, 2)

class_sizes %&gt;%
  summarize(`Average class size` = round(weighted.mean(`class size`, count), 1))</code></pre>
          <table>
            <thead>
              <tr>
                <th style="text-align:right;">
                  Average class size
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="text-align:right;">
                  23.7
                </td>
              </tr>
            </tbody>
          </table>
          <p>But if you survey a group of students, ask them how many students are in their classes, and compute the mean, you would think the average class was bigger. Let’s see how much&nbsp;bigger.</p>
          <p>First, let’s compute the distribution as observed by students, where the probability associated with each class size is “biased” by the number of students in the class. For each class size we multiply the probability by the number of students
            who observe that class size. The result is a new <span class="caps">PMF</span> that represents the biased&nbsp;distribution:</p>
          <pre class="r"><code>class_sizes2 &lt;- class_sizes %&gt;%
  mutate(actual = count / sum(count)) %&gt;%
  mutate(observed = (actual * `class size`) / sum(actual * `class size`)) %&gt;%
  gather(key = distribution, value = PMF, actual:observed)</code></pre>
          <p>Now we can plot the actual and observed distributions&nbsp;together:</p>
          <pre class="r"><code>class_sizes2 %&gt;%
  ggplot(
    mapping = aes(x = `class size`, y = PMF, fill = distribution,
                  color = distribution)) +
  geom_col(position = &quot;identity&quot;, alpha = 0.5)</code></pre>
          <p>
            <img src="http://spring18.cds101.com/img/Materials/class_size_paradox-actual-vs-observed-class-size-labeled-1.svg" title="plot of chunk actual-vs-observed-class-size-labeled" alt="plot of chunk actual-vs-observed-class-size-labeled" width="60%"
              style="display: block; margin: auto;" />
          </p>
          <p>As we see in the above figure, the biased distribution corresponds to fewer small classes and more large ones. The mean of the biased distribution&nbsp;is,</p>
          <pre class="r"><code>class_sizes2 %&gt;%
  group_by(distribution) %&gt;%
  summarize(`Average class size` = round(weighted.mean(`class size`, `PMF`), 1))</code></pre>
          <table>
            <thead>
              <tr>
                <th style="text-align:left;">
                  distribution
                </th>
                <th style="text-align:right;">
                  Average class size
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="text-align:left;">
                  actual
                </td>
                <td style="text-align:right;">
                  23.7
                </td>
              </tr>
              <tr>
                <td style="text-align:left;">
                  observed
                </td>
                <td style="text-align:right;">
                  29.1
                </td>
              </tr>
            </tbody>
          </table>
          <p>which is almost 25% higher than the actual&nbsp;mean.</p>
          <p>It is also possible to invert this operation. Suppose you want to find the distribution of class sizes at a college, but you can’t get reliable data from the Dean. An alternative is to choose a random sample of students and ask how many students
            are in their classes. The result would be biased for the reasons we’ve just seen, but you can use it to estimate the actual distribution. Here’s the code that can be used to unbias a <span class="caps">PMF</span>:</p>
          <pre class="r"><code>class_sizes2 %&gt;%
  spread(key = distribution, value = PMF) %&gt;%
  mutate(
    unbiased = (observed * 1 / `class size`) /
      sum(observed * 1 / `class size`)) %&gt;%
  select(`class size`, count, observed, unbiased, actual)</code></pre>
          <table>
            <thead>
              <tr>
                <th style="text-align:right;">
                  class size
                </th>
                <th style="text-align:right;">
                  count
                </th>
                <th style="text-align:right;">
                  observed
                </th>
                <th style="text-align:right;">
                  unbiased
                </th>
                <th style="text-align:right;">
                  actual
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="text-align:right;">
                  7
                </td>
                <td style="text-align:right;">
                  8
                </td>
                <td style="text-align:right;">
                  0.0363636
                </td>
                <td style="text-align:right;">
                  0.1230769
                </td>
                <td style="text-align:right;">
                  0.1230769
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  12
                </td>
                <td style="text-align:right;">
                  8
                </td>
                <td style="text-align:right;">
                  0.0623377
                </td>
                <td style="text-align:right;">
                  0.1230769
                </td>
                <td style="text-align:right;">
                  0.1230769
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  17
                </td>
                <td style="text-align:right;">
                  14
                </td>
                <td style="text-align:right;">
                  0.1545455
                </td>
                <td style="text-align:right;">
                  0.2153846
                </td>
                <td style="text-align:right;">
                  0.2153846
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  22
                </td>
                <td style="text-align:right;">
                  4
                </td>
                <td style="text-align:right;">
                  0.0571429
                </td>
                <td style="text-align:right;">
                  0.0615385
                </td>
                <td style="text-align:right;">
                  0.0615385
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  27
                </td>
                <td style="text-align:right;">
                  6
                </td>
                <td style="text-align:right;">
                  0.1051948
                </td>
                <td style="text-align:right;">
                  0.0923077
                </td>
                <td style="text-align:right;">
                  0.0923077
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  32
                </td>
                <td style="text-align:right;">
                  12
                </td>
                <td style="text-align:right;">
                  0.2493506
                </td>
                <td style="text-align:right;">
                  0.1846154
                </td>
                <td style="text-align:right;">
                  0.1846154
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  37
                </td>
                <td style="text-align:right;">
                  8
                </td>
                <td style="text-align:right;">
                  0.1922078
                </td>
                <td style="text-align:right;">
                  0.1230769
                </td>
                <td style="text-align:right;">
                  0.1230769
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  42
                </td>
                <td style="text-align:right;">
                  3
                </td>
                <td style="text-align:right;">
                  0.0818182
                </td>
                <td style="text-align:right;">
                  0.0461538
                </td>
                <td style="text-align:right;">
                  0.0461538
                </td>
              </tr>
              <tr>
                <td style="text-align:right;">
                  47
                </td>
                <td style="text-align:right;">
                  2
                </td>
                <td style="text-align:right;">
                  0.0610390
                </td>
                <td style="text-align:right;">
                  0.0307692
                </td>
                <td style="text-align:right;">
                  0.0307692
                </td>
              </tr>
            </tbody>
          </table>
          <p>It’s similar to before; the only difference is that it divides each probability by the class size instead of&nbsp;multiplying.</p>
          <h2 id="credits">Credits</h2>
          <div class="license">
            <p>This work, <em>Class size paradox</em>, is a derivative of
              <a href="http://a.co/grOJGrv">Allen B. Downey, “Chapter 3 Probability mass functions” in <em>Think Stats: Exploratory Data Analysis</em>, 2nd ed. (O’Reilly Media, Sebastopol, <span class="caps">CA</span>, 2014)</a>, used under
              <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="caps">CC</span> <span class="caps">BY</span>-<span class="caps">NC</span>-<span class="caps">SA</span> 4.0</a>. <em>Class Size Paradox</em> is licensed under
              <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="caps">CC</span> <span class="caps">BY</span>-<span class="caps">NC</span>-<span class="caps">SA</span> 4.0</a> by James&nbsp;Glasbrenner.</p>
          </div>

        </div>
      </article>
    </div>
    <footer class="page-footer">
      <div class="footer-grid-container">
        Except where otherwise noted, site materials are created by
        <a href="https://cos.gmu.edu/cds/faculty-profile-james-glasbrenner/">
          James K. Glasbrenner
        </a>
        and licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
          Creative Commons Attribution-ShareAlike 4.0 International License
        </a>.
      </div>
    </footer>
    <script src="http://spring18.cds101.com/theme/js/cds101.min.js"></script>
    <script src="http://spring18.cds101.com/theme/js/vendor/highlightjs/highlight.min.js"></script>
    <script src="http://spring18.cds101.com/theme/js/vendor/katex/katex.min.js"></script>
    <script src="http://spring18.cds101.com/theme/js/vendor/katex/contrib/auto-render.min.js"></script>
    <script src="http://spring18.cds101.com/theme/js/vendor/wookmark/wookmark.min.js"></script>
    <script src="http://spring18.cds101.com/theme/js/vendor/fontawesome/fontawesome-all.min.js"></script>
    <script src="http://spring18.cds101.com/theme/js/vendor/vendorInit.js"></script>
  </body>

</html>